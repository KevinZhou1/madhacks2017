<canvas id ="ctx" width="500" height="500" style="border:1px
solid #000000;"></canvas>


<script src="
https://cdn.socket.io/socket.io-1.4.5.js"
><script>
<script>

	var ctx = document.getElementById("ctx").getContext("2d");
	ctx.font = '30px Arial';
	var socket = io();
	
	//updates the position of each object in sockets
	socket.on('newPositions', function(data) {
		ctx.clearRect(0,0,500,500);
		for (var i = 0; i < data.length; i++) {
			ctx.translate(data[i].x +25,data[i].y + 25);
			ctx.rotate(Math.PI/180 * data[i].rotation);
			ctx.translate(0, data[i].speed);
			ctx.fillRect(-25,-25,50,50);
			ctx.translate(0, -data[i].speed)
			ctx.rotate(Math.PI/180 * -data[i].rotation);
			ctx.translate(-(data[i].x + 25),-(data[i].y + 25));
			
			//ctx.fillText(data[i].number,data[i].x,data[i].y);
		}
		//ctx.translate(0,0);
	});
	
	document.addEventListener('keydown', function(event) {
		if (event.keyCode === 68) {
			socket.emit('keypress', {inputId:'right', state:true});
		}
		else if (event.keyCode === 83)
			socket.emit('keypress', {inputId:'down', state:true});
		else if (event.keyCode === 65)
			socket.emit('keypress', {inputId:'left', state:true});
		else if (event.keyCode === 87)
			socket.emit('keypress', {inputId:'up', state:true});
		
	});
	document.addEventListener('keyup', function(event) {
		if (event.keyCode === 68)
			socket.emit('keypress', {inputId:'right', state:false});
		else if (event.keyCode === 83)
			socket.emit('keypress', {inputId:'down', state:false});
		else if (event.keyCode === 65)
			socket.emit('keypress', {inputId:'left', state:false});
		else if (event.keyCode === 87)
			socket.emit('keypress', {inputId:'up', state:false});
		
	});
</script>
<meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">